/**
 * Binary Anvil, Inc.
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Binary Anvil, Inc. Software Agreement
 * that is bundled with this package in the file LICENSE_BAS.txt.
 * It is also available through the world-wide-web at this URL:
 * http://www.binaryanvil.com/software/license/
 *
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@binaryanvil.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade this software to
 * newer versions in the future. If you wish to customize this software for
 * your needs please refer to http://www.binaryanvil.com/software for more
 * information.
 *
 * @category    BinaryAnvil
 * @package     Infinity
 * @copyright   Copyright (c) 2018-2019 Binary Anvil,Inc. (http://www.binaryanvil.com)
 * @license     http://www.binaryanvil.com/software/license
 */

//
//  Variables
//  _____________________________________________

@account-title-border-color: @color-gray-middle2;
@account-table-border-bottom-color: @color-gray-middle1;
@account-table-action-delete: @color-red12;

@_password-default: @color-gray-light01;
@_password-weak: #ffafae;
@_password-medium: #ffd6b3;
@_password-strong: #c5eeac;
@_password-very-strong: #81b562;
@_greeting-bg-color: #eeeeed;
@border-color-mercury: #e4e3e3;

@account-paymentinfo-button-width: 245px;

//
//  Common
//  _____________________________________________

& when (@media-common = true) {
    body.customer-account-login {
        color: @color-black;
    }

    .account {
        &.customer-address-form,
        &.customer-paymentinfo-index {
            .actions-toolbar {
                & > .secondary {
                    .back {
                        .lib-button-primary();
                        width: @account-paymentinfo-button-width;
                        margin-top: 0;
                        padding: 24px @indent__base;
                        line-height: 1;

                        &.action {
                            .lib-css(outline, 1px solid transparent);
                            background-color: @color-white;
                            border: 1px solid @medium-turquoise;
                        }

                        &:hover {
                            .lib-css(outline, 1px solid @medium-turquoise);
                            .transition(all ease 0.3s);
                            border-color: @medium-turquoise;
                        }

                        span {
                            .lib-font-size(20);
                            text-transform: uppercase;
                            color: @medium-turquoise;
                        }
                    }
                }

                .primary {
                    float: none;

                    .save,
                    .action[data-action="save-address"] {
                        width: @account-paymentinfo-button-width;
                        padding: 25px @indent__base;
                        line-height: 1;
                        border: 0;
                        outline: 0;
                        background-color: @medium-turquoise;
                        color: @color-white;

                        &:hover {
                            outline: none;
                        }

                        span {
                            .lib-font-size(20);
                        }
                    }
                }
            }
        }

        &.customer-address-form {
            .legend {
                & > span {
                    .lib-font-size(30);
                    font-family: @font-family__secondary;
                    font-weight: @font-weight__bold;
                }
            }
        }

        .page-title {
            .lib-font-size(34);
        }

        .nav-sections {
            margin-bottom: 0;
        }

        .block {
            &.block-collapsible-nav,
            &.account-nav {
                margin-bottom: 40px;
            }
        }


        .columns {
            .lib-vendor-prefix-display();
            
            //  My account
            .sidebar-main,
            .sidebar-additional {
                .lib-vendor-prefix-order(1);
            }

            .page-title-wrapper {
                .lib-vendor-prefix-order(2);
            }

            .column.main {
                width: 77.7%;
                .lib-vendor-prefix-order(3);
            }
        }

        .greeting {
            box-sizing: border-box;
            margin-left: auto;
            margin-right: auto;
            max-width: @layout__max-width;
            width: auto;
            padding: 50px 0 10px 0;

            &-wrapper {
                padding: 0 20px;
                background-color: @_greeting-bg-color;
            }

            h1 {
                margin: 0;
            }

            p {
                .lib-font-size(22);

                a {
                    padding-left: 10px;
                    color: @kilamanjaro;
                    text-decoration: underline;
                    .transition(all ease 0.3s);

                    &:hover {
                        text-decoration: none;
                    }
                }
            }
        }

        .container-wrapper {
            .lib-vendor-prefix-display();
            .lib-css(justify-content, space-between, 1);
            max-width: 1235px;

            .container {
                position: relative;
                padding: 70px 35px 135px 35px;
                border-radius: 18px;
                max-width: 390px;
                width: 100%;
                border: 5px solid #d6eef1;

                &-wishlist {
                    margin-top: 40px;
                    max-width: 100%;
                    padding: 70px 35px;

                    ol {
                        .lib-font-size(0);
                        display: block;
                        margin: 0;
                        margin-left: -40px;

                        li {
                            display: inline-block;
                            width: 20%;
                            margin-bottom: @layout__width-xs-indent;
                            padding-left: 40px;

                            .product-item-name {
                                text-align: center;
                                margin: 0;
                                width: 100%;
                                float: none;
                            }

                            .price-box {
                                text-align: center;
                                margin: 0;
                                width: 100%;
                                float: none;
                            }
                            
                            .price-label {
                                display: none;
                            }

                            .price {
                                .lib-font-size(18);
                                font-weight: @font-weight__semibold;
                                margin-top: 10px;
                                display: block;
                            }
                        }
                    }

                    .product-item-photo {
                        display: inline-block;
                    }
                }

                > h2 {
                    margin-bottom: 10px;
                }

                > span {
                    .lib-font-size(25);
                }

                button {
                    border: 0;
                    outline: 0;
                    padding: 25px 10px;
                    background-color: @medium-turquoise;
                    color: @color-white;
                    position: absolute;
                    bottom: 35px;
                    left: 50%;
                    width: 80%;
                    .transform(translateX(-50%));

                    span {
                        .lib-font-size(23);
                    }
                }
            }
        }
    }

    .sales-order-history {
        .data.table {
            .lib-font-size(30);

            th.col {
                &.actions {
                    display: none;
                }

                &.date {
                    padding-left: 0;
                }
            }
            td.col {
                vertical-align: middle;

                &.actions {
                    text-align: right;
                }

                &.date {
                    padding-left: 0;
                }
            }

            .action {
                max-width: 245px;
                display: inline-block;
                text-align: center;
                text-transform: uppercase;
                .lib-font-size(23);
                padding: 17px;
                font-weight: @font-weight__bold;
                width: 100%;

                &.view {
                    border: 1px solid @medium-turquoise;
                    color: @medium-turquoise;

                    &:after {
                        &:extend(.abs-visually-hidden-desktop-s all);
                    }
                }
                &.order {
                    border: 1px solid @medium-turquoise;
                    background-color: @medium-turquoise;
                    color: @color-white;
                }
            }
        }
    }

    .customer-address-index {
        .box-address-billing,
        .box-address-shipping {
            position: relative;
            padding: 25px 0 25px;
            border-bottom: 3px solid #e4e3e3;
        }

        div.block-addresses-list {
            margin-bottom: 40px;

            .block-content li.item {
                padding: 25px 0 25px;
                border-bottom: 3px solid #e4e3e3;
                position: relative;

                .item.actions {
                    top: 0;
                    right: 0;
                    position: absolute;
                }
            }
        }

        div.block-addresses-default {
            margin-bottom: 0;
        }

        .block-title {
            .lib-font-size(32);
            margin-bottom: 30px;
            display: none;
        }

        .column.main .block:not(.widget) .box-title {
            margin-bottom: 0;

            span {
                .lib-font-size(30);
            }
        }
        address {
            font-family: @font-family__secondary;
        }

        .box-actions {
            position: absolute;
            top: 0;
            right: 0;
        }

        .columns .main {
            .actions-toolbar {
                button {
                    border: 0;
                    outline: none;
                    text-transform: none;
                    padding: 0;
                    font-weight: @font-weight__regular;
                    
                    span {
                        display: inline-block;
                        padding-left: 25px;
                        color: @medium-turquoise;
                       .lib-font-size(30);
                        position: relative;

                        &:before {
                            content: '+';
                            position: absolute;
                            top: 50%;
                            left: 0;
                            .transform(translateY(-50%));
                        }
                    }
                }
            }
        }
    }

    .customer-paymentinfo-index {
        .add-payment-title,
        .add-payment-form {
            display: none;
        }

        .box-address-billing {
            margin-bottom: 35px;
            padding-bottom: 35px;
            border-bottom: 3px solid @border-color-mercury;
        }

        .block-addresses-list {
            .items {
                &.addresses {
                    .item {
                        &.actions {
                            .action {
                                &:after {
                                    height: 22px;
                                    margin: 0 @indent__s 0 @indent__s + 8px;
                                }
                            }
                        }
                    }
                }
            }
        }

        .box-content {
            position: relative;

            & > .item {
                &.actions {
                    .lib-font-size(30);
                    position: absolute;
                    top: 0;
                    right: 0;
                    font-family: @font-family__secondary;
                }
            }
        }

        .card-type-wrapper {
            padding-left: 110px;

            &.VI,
            &.MC,
            &.AE,
            &.DI {
                background-repeat: no-repeat;
                background-position: 0 7px;
            }

            &.VI {
                background-image: url('@{images}cards/visa.png');
            }

            &.MC {
                background-image: url('@{images}cards/mastercard.png');
            }

            &.AE {
                background-image: url('@{baseDir}Magento_Payment/images/cc/ae.png');
            }

            &.DI {
                background-image: url('@{baseDir}Magento_Payment/images/cc/di.png');
            }

            p {
                .lib-font-size(30);
                margin-bottom: 0;
                line-height: 1.2;
                font-family: @font-family__secondary;
            }

            .cart-name {
                text-transform: uppercase;
            }
        }

        .add-payment-form {
            @payment-input-field-width: 47.8%;
            max-width: 1255px;

            &.edit-payment {
                display: block;
            }

            .country {
                display: none !important;
            }

            .fieldset {
                &.customer-name-fieldset,
                &.payment,
                &.address-information {
                    .lib-vendor-prefix-display();
                    .lib-vendor-prefix-flex-wrap();
                    .lib-css(justify-content, space-between, 1);
                }

                &.customer-name-fieldset {
                    margin-bottom: 0;

                    & > .field {
                        .lib-vendor-prefix-flex-basis(@payment-input-field-width);
                    }
                }

                &.payment {
                    width: @payment-input-field-width;
                    margin-bottom: @indent__base;

                    & > .field {
                        .lib-vendor-prefix-flex-basis(100%);
                    }

                    .field {
                        .month {
                            padding-right: 2.5%;
                        }

                        .year {
                            padding-left: 2.5%;
                        }
                    }

                    .field-tooltip {
                        top: 50%;
                        transform: translateY(-50%);
                        right: 15px;

                        .field-tooltip-action {
                            &:before {
                                width: 23px;
                            }
                        }
                    }
                }

                &.address-information {
                    margin-bottom: 0;

                    .field {
                        .lib-vendor-prefix-flex-basis(@payment-input-field-width);

                        &.street,
                        &.region {
                            .lib-vendor-prefix-flex-basis(100%);
                        }
                    }

                    .additional {
                        margin-top: @indent__base;

                        .label {
                            font-weight: @font-weight__semibold;
                        }
                    }
                }

                &.telephone-field {
                    width: @payment-input-field-width;
                }
            }
        }

        .actions-toolbar {
            .add-payment {
                padding: 0;
                border: 0;
                outline: none;
                text-transform: none;
                font-weight: @font-weight__regular;
                background-color: transparent;


                span {
                    .lib-font-size(30);
                    position: relative;
                    display: inline-block;
                    padding-left: 25px;
                    color: @medium-turquoise;

                    &:before {
                        .transform(translateY(-50%));
                        content: '+';
                        position: absolute;
                        top: 50%;
                        left: 0;
                    }
                }
            }
        }

        .block-title {
            & > .actions-toolbar {
                margin-top: 55px;
            }
        }
    }

    .customer-account-edit {
        .field {
            &.choice {
                display: none;
            }
        }

        .wrap,
        .wrap + .content {
            border-bottom: 3px solid @border-color-mercury;
            padding: 28px 10px 50px 0;
        }

        .wrap {
            .lib-vendor-prefix-display();

            > div {
                .lib-font-size(30);
                font-family: @font-family__secondary;

                &:first-child {
                    font-weight: @font-weight__bold;
                    .lib-vendor-prefix-flex-grow(1);
                    .lib-vendor-prefix-flex-shrink(1);
                    .lib-vendor-prefix-flex-basis(0);
                }
                &:nth-child(2) {
                    .lib-vendor-prefix-flex-grow(2);
                    .lib-vendor-prefix-flex-shrink(1);
                    .lib-vendor-prefix-flex-basis(0);
                }
                &:last-child {
                    .lib-vendor-prefix-flex-grow(1);
                    .lib-vendor-prefix-flex-shrink(1);
                    .lib-vendor-prefix-flex-basis(0);
                    text-align: right;
                }

            }
            + .content {
                display: none;
                position: relative;

                &.active {
                    .lib-vendor-prefix-display()!important;

                    > div {
                        font-family: @font-family__secondary;

                        &:first-child {
                            .lib-font-size(30);
                            font-weight: @font-weight__bold;
                            .lib-vendor-prefix-flex-grow(1);
                            .lib-vendor-prefix-flex-shrink(1);
                            .lib-vendor-prefix-flex-basis(0);
                        }
                        &:nth-child(2) {
                            position: relative;
                            .lib-vendor-prefix-flex-grow(2);
                            .lib-vendor-prefix-flex-shrink(1);
                            .lib-vendor-prefix-flex-basis(0);

                            > * {
                                max-width: 500px;
                            }

                            input,
                            select {
                                margin-bottom: 20px;
                            }

                            .password {
                                &.new {
                                    input {
                                        &[type="password"] {
                                            margin-bottom: 0;
                                        }

                                        & + div {
                                            margin-bottom: 20px;
                                        }
                                    }
                                }
                            }

                            .primary {
                                .lib-vendor-prefix-display();
                                .lib-font-size(20);

                                .cancel {
                                    margin-right: 10px;
                                    .lib-font-size(20);
                                }

                                .save {
                                    background-color: @medium-turquoise;
                                    border-color: @medium-turquoise;
                                    outline: @medium-turquoise;
                                    color: @color-white;
                                }

                                > * {
                                    .lib-vendor-prefix-flex-grow(1);
                                    .lib-vendor-prefix-flex-shrink(1);
                                    .lib-vendor-prefix-flex-basis(0);
                                    padding: 10px 20px;
                                }
                            }
                        }
                        &:last-child {
                            .lib-vendor-prefix-flex-grow(1);
                            .lib-vendor-prefix-flex-shrink(1);
                            .lib-vendor-prefix-flex-basis(0);
                            text-align: right;
                        }
                    }
                }
            }
        }
    }

    .login-container {
        .block {
            &-new-customer {
                .actions-toolbar {
                    margin-top: 25px;
                }
            }
        }

        .block-title {
            .lib-font-size(34);
            text-transform: uppercase;
        }

        .fieldset {
            .lib-form-hasrequired(bottom);

            &:after {
                margin-top: 35px;
            }

            .field {
                &.note {
                    font-family: @font-family__secondary;
                }
            }
            
            &.create {
                &.info,
                &.account {
                    margin-bottom: 10px;

                    .legend {
                        display: none;
                    }
                }

                &.info {
                    &:after {
                        content: none;
                    }

                    .newsletter {
                        max-width: 705px;
                    }
                }
            }
        }

        .sign-social {
            max-width: 750px;

            h5 {
                text-transform: none;
                .lib-font-size(24);
            }

            .social-wrap {
                .lib-vendor-prefix-display();
                .lib-vendor-prefix-flex-wrap (nowrap);

                + .field.note {
                    margin-top: 25px;
                }

                .social {
                    .lib-vendor-prefix-flex-basis(50%);
                    text-transform: uppercase;
                    color: @color-white;
                    text-align: center;
                    padding: 20px 15px;
                    font-weight: @font-weight__bold;

                    &:before {
                        padding-right: 15px;
                    }

                    &.facebook {
                        background-color: @facebook-color;
                        margin-right: 5px;
                    }

                    &.google-p {
                        background-color: @google-color;
                    }

                    span {
                        font-family: @font-family__base;
                    }
                }
            }
        }
        .field.header {
            display: none;
        }

    .actions-toolbar {
        .primary,
        .primary button {
            color: @color-white;
            max-width: 330px;
            width: 100%;
            background-color: @medium-turquoise;
            border: 0;
            outline: 0;
            padding: 10px;
            .lib-font-size(20);

                &:hover {
                    outline: none;
                }
            }
        }

        .delimiter {
            border: 1px solid #a6a4a2;
            width: 100%;
            display: inline-block;
            position: relative;
            max-width: 400px;
            color: #a6a4a2;
            margin: 50px 0 20px 0;

            &:before {
                content: attr(data-title);
                position: absolute;
                top: 50%;
                left: 50%;
                .transform(translate(-50%, -50%));
                background: white;
                padding: 0 20px;
                text-transform: uppercase;
            }
        }

        .you-agree {
            margin-top: 40px;
            color: @color-gray;
        }
        
        .fieldset {
            &.login {
                .actions-toolbar {
                    .primary {
                        float: none;
                        display: block;
                    }

                    .secondary {
                        margin-top: 10px;
                        margin-bottom: 30px;

                          a {
                            color: @color-gray;
                            border-bottom: 1px solid @color-gray;
                        }
                    }
                }
            }
        }
    }

    .block-addresses-list {
        .items.addresses {
            > .item {
                margin-bottom: @indent__base;

                &:last-child {
                    margin-bottom: 0;
                }
            }

            .item.actions {
                margin-top: @indent__xs;

                .action {
                    &:extend(.abs-account-actions all);
                }
            }
        }

        address {
            &:extend(.abs-account-block-line-height all);
        }
    }

    .form-address-edit {
        #region_id {
            display: none;
        }

        .actions-toolbar .action.primary {
            &:extend(.abs-button-l all);
        }
    }

    .form-edit-account {
        .fieldset.password {
            display: none;
        }
    }

    .form-create-account {
        .fieldset-fullname {
            .fields {
                .field {
                    float: none;
                }
            }
        }
    }

    //  Full name fieldset
    .fieldset {
        .fullname {
            > .label {
                &:extend(.abs-visually-hidden all);
            }
        }
    }

    .box-billing-address,
    .box-shipping-address,
    .box-address-billing,
    .box-address-shipping,
    .box-information,
    .box-newsletter {
        .box-content {
            &:extend(.abs-account-block-line-height all);
        }
    }

   .box-address-billing,
   .box-address-shipping,
   .block-addresses-list .block-content {
        address {
            .lib-font-size(30);
            line-height: 1.2;
        }
    }

    //  My account
    .account {
        .page-title-wrapper {
            .page-title {
                display: inline-block;
            }
        }

        .messages {
            margin-bottom: @indent__base;
        }

        .column.main {

            h2 {
                margin-top: 0;
            }

            .block:not(.widget) {
                &:extend(.abs-account-blocks all);
            }
        }

        .sidebar-additional {
            margin-top: @indent__xl;
        }

        .table-wrapper {
            .lib-css(margin-bottom, @indent__base);
            border-bottom: 1px solid @account-table-border-bottom-color;

            &:last-child {
                margin-bottom: 0;
            }
        }

        .legend {
            &:extend(.abs-account-title all);
        }
    }

    .account,
    [class^='sales-guest-'],
    .sales-guest-view {
        .column.main {
            .order-details-items {
                .table-wrapper {
                    .data.table {
                        &:extend(.abs-table-striped all);
                    }
                }
            }
        }

        .data.table {
            .col.actions {
                .action {
                    &:extend(.abs-account-actions all);
                    &.delete {
                        .lib-css(color, @account-table-action-delete);
                    }
                }
            }
        }
    }

    //
    //  Blocks & Widgets
    //  ---------------------------------------------

    .block {
        &:extend(.abs-margin-for-blocks-and-widgets all);
        .column.main & {
            &:last-child {
                margin-bottom: 0;
            }
        }

        .title {
            strong {
                .lib-heading(h4);
                .column.main & {
                }
            }

            margin-bottom: @indent__s;
        }

        p {
            &:last-child {
                margin: 0;
            }
        }

        .box-actions {
            margin-top: @indent__xs;

            .action {
                &:extend(.abs-account-actions all);
            }
        }
    }

    //
    //  Password Strength Meter
    //  ---------------------------------------------

    .field.password {
        .control {
            .lib-vendor-prefix-display();
            .lib-vendor-prefix-flex-direction();

            .mage-error {
                .lib-vendor-prefix-order(2);
            }

            .input-text {
                .lib-vendor-prefix-order(0);
                z-index: 2;
            }
        }
    }

    .password-strength-meter {
        background-color: @_password-default;
        height: @form-element-input__height;
        line-height: @form-element-input__height;
        padding: @form-element-input__padding;
        position: relative;
        z-index: 1;

        &:before {
            content: '';
            height: 100%;
            left: 0;
            position: absolute;
            top: 0;
            z-index: -1;
        }

        .password-none & {
            &:before {
                background-color: @_password-default;
                width: 100%;
            }
        }

        .password-weak & {
            &:before {
                background-color: @_password-weak;
                width: 25%;
            }
        }

        .password-medium & {
            &:before {
                background-color: @_password-medium;
                width: 50%;
            }
        }

        .password-strong & {
            &:before {
                background-color: @_password-strong;
                width: 75%;
            }
        }

        .password-very-strong & {
            &:before {
                background-color: @_password-very-strong;
                width: 100%;
            }
        }
    }

    .control.captcha-image {
        .lib-css(margin-top, @indent__s);

        .captcha-img {
            vertical-align: middle;
        }
    }

    .account {
        .data.table-return-items {
            .qty {
                .input-text {
                    &:extend(.abs-input-qty all);
                }
            }
        }
    }

    .order-products-toolbar {
        position: relative;

        .toolbar-amount {
            position: relative;
            text-align: center;
        }
    }
}

//
//  Desktop
//  _____________________________________________

.media-width(@extremum, @break) when (@extremum = 'min') and (@break = @screen__m) {
    .login-container {
        &:extend(.abs-add-clearfix-desktop all);

        .block {
            &:extend(.abs-blocks-2columns all);
            &.login {
                .actions-toolbar {
                    > .primary {
                        margin-bottom: 0;
                        margin-right: @indent__l;
                    }

                    > .secondary {
                        float: left;
                    }
                }
            }
        }

        .fieldset {
            > .field {
                > .control {
                    width: 55%;
                }
            }
        }
    }

    .form-create-account {
        .fieldset-fullname {
            .fields {
                display: table;
                width: 100%;

                .field {
                    display: table-cell;

                    + .field {
                        padding-left: @indent__s;
                    }
                }
            }

            .field-name-prefix,
            .field-name-suffix {
                width: 50px;
            }
        }
    }

    .form.password.reset,
    .form.send.confirmation,
    .form.password.forget,
    .form.create.account{
        min-width: 600px;
        width: 50%;
    }

    .customer-account-login {
        .login-container {
            .lib-vendor-prefix-display();
            .lib-css(justify-content, space-between, 1);

            input,
            select,
            .password-strength-meter {
                min-width: 330px;
            }

            .newsletter {
                .label {
                    display: inline-block;
                }
            }
        }

        .form {
            &.create {
                &.account {
                    float: none;
                    min-width: auto;
                }
            }
        }
    }

    .register-container {
        width: 50%;
    }

    .form.create.account,
    .fieldset.create.info,
    .fieldset.create.account {
        float: left;
        width: 100%;
    }

    //  My account
    .account.page-layout-2columns-left {
        .sidebar-main,
        .sidebar-additional {
            width: 22.3%;
        }

        .column.main {
            width: 77.7%;
        }
    }

    .account {
        .page-title-wrapper {
            &:extend(.abs-add-clearfix-desktop all);
        }

        .column.main {
            .block:not(.widget) {
                .block-content {
                    &:extend(.abs-add-clearfix-desktop all);
                }
            }
        }

        .container-wrapper {
            &.customer-short-info {
                .lib-css(justify-content, flex-start, 1);

                .container {
                    .lib-vendor-prefix-flex-basis(48%);
                    margin-right: 3%;

                    &:nth-child(2n) {
                        margin-top: 0;
                        margin-right: 0;
                    }

                    &:last-child {
                        margin-right: 0;

                        button {
                            width: 80%;
                        }
                    }
                }
            }
        }

        .data.table {
            margin-bottom: 0;

            .col {
                &.actions {
                    white-space: nowrap;
                }
            }
        }

        .toolbar {
            &:extend(.abs-pager-toolbar all);
        }
    }

    .block-addresses-list {
        .items.addresses {
            &:extend(.abs-add-clearfix-desktop all);
            font-size: 0;

            > .item {
                display: inline-block;
                font-size: @font-size__base;
                margin-bottom: @indent__base;
                vertical-align: top;
                width: 100%;

                &:nth-last-child(1),
                &:nth-last-child(2) {
                    margin-bottom: 0;
                }

                &:nth-child(even) {
                    //margin-left: 4%;
                }
            }
        }

        address {
            &:extend(.abs-account-block-font-size all);
        }
    }

    .page-main {
        .block {
            &:extend(.abs-margin-for-blocks-and-widgets-desktop all);
        }
    }

    .form-address-edit {
        > .fieldset {
            &:extend(.abs-blocks-2columns all);
        }
    }

    .form-edit-account {
        .fieldset,
       > .field {
            width: 100%;

            .fieldset {
                margin-bottom: @indent__base;
                width: 100%;
            }
        }

        .fieldset {
            &.info {
                margin-bottom: 0;
            }

            &.password {
                display: block!important;
            }
        }

        .field {
            &.email {
                display: block!important;
            }
        }
    }

    .box-billing-address,
    .box-shipping-address,
    .box-address-billing,
    .box-address-shipping,
    .box-information {
        .box-content {
            &:extend(.abs-account-block-font-size all);
        }
    }

    .control.captcha-image {
        .captcha-img {
            margin: 0 @indent__s @indent__s 0;
        }
    }
}

.media-width(@extremum, @break) when (@extremum = 'min') and (@break = @screen__l) {
    .account {
        .container-wrapper {
            &.customer-short-info {
                .container {
                    &:nth-child(2n) {
                        margin-right: 3%;
                    }
                }
            }
        }
    }
}

//
//  Mobile @screen__s
//  _____________________________________________

.media-width(@extremum, @break) when (@extremum = 'max') and (@break = @screen__s) {
    .account {
        .column.main,
        .sidebar-additional {
            margin: 0;
        }

        .data.table {
            &:extend(.abs-table-striped-mobile all);
        }
    }
}

.media-width(@extremum, @break) when (@extremum = 'max') and (@break = @screen__m) {
    .customer-address-index {
        .modal-footer {
            .action-secondary,
            .action-primary {
                width: 100%;
                padding-left: 0;
                padding-right: 0;
            }

            .action-primary {
                margin-top: @layout__width-xs-indent;
            }
        }
    }

    .customer-account-edit {
        .fieldset {
            &.password {
                display: block !important;
            }

            &.email {
                & > .email {
                    display: block !important;
                }
            }
        }

        .wrap {
            .lib-vendor-prefix-flex-wrap();
            padding-right: 0;

            & > div {
                .lib-font-size(18);

                &:first-child {
                    .lib-vendor-prefix-flex-basis(100%);
                }
            }

            & + .content {
                &.active {
                    .lib-vendor-prefix-flex-wrap();
                    padding-right: 0;

                    & > div {
                        &:first-child {
                            .lib-vendor-prefix-flex-basis(100%);
                            .lib-font-size(18);
                            margin-bottom: @indent__s;
                        }

                        &:nth-child(2) {
                            .lib-vendor-prefix-flex-basis(100%);

                            .primary {
                                .lib-vendor-prefix-display();
                                .lib-font-size(16);

                                .cancel {
                                    .lib-font-size(16);
                                }

                                .action {
                                    padding: 15px;

                                    span {
                                        padding: 0;
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }

        .wrap,
        .wrap + .content {
            padding: 15px 0;;
        }

        .form-edit-account {
            & > .fieldset {
                margin: 0;
            }
        }
    }

    .account {
        &.customer-address-form {
            .legend {
                & > span {
                    .lib-font-size(18);
                }
            }
        }
    }
}

.media-width(@extremum, @break) when (@extremum = 'max') and (@break = @screen__1377) {
    .account {
        .greeting-wrapper {
            padding: 0 20px;
        }
        .table-wrapper {
            .table.data {
                .lib-font-size(20);

                tbody td {
                    &.col.actions {
                        padding: 0;

                        .action {
                            max-width: 145px;
                            .lib-font-size(16);
                            padding: 10px;
                        }
                    }
                }
            }
        }
    }
}
.media-width(@extremum, @break) when (@extremum = 'max') and (@break = @screen__l) {
    .account {
        .container-wrapper {
            .lib-vendor-prefix-flex-wrap();
            .lib-css(justify-content, space-between, 1);

            .container {
                .lib-font-size(16);
                .lib-vendor-prefix-flex-basis(100%);
                .lib-vendor-prefix-flex-shrink(1);
                .lib-vendor-prefix-flex-grow(1);
                max-width: 48%;
                width: 100%;

                &:last-child {
                    margin-top: 20px;
                    max-width: 100%;

                    button {
                        max-width: 390px;
                        width: 100%;
                    }
                }

                h2 {
                    .lib-font-size(17);
                }

                .wrap {
                    max-width: 390px;
                    margin: 0 auto;
                }

                button {
                    padding: 15px 10px;

                    span  {
                        .lib-font-size(18);
                    }
                }
            }

            .container-wishlist {
                ol {
                    li {
                        width: 33%;
                    }
                }
            }
        }
        .table-wrapper {
            position: relative;
            border-bottom: 0;

            &:after {
                position: absolute;
                bottom: 0;
                display: block;
                width: 80%;
                left: 50%;
                .transform(translate(-50%));
                content: '';
                height: 2px;
                background-color: #d5d4d4;
            }
            .table {
                &:not(.totals):not(.cart):not(.table-comparison) {
                    display: table;

                    thead {
                        > tr {
                            .lib-vendor-prefix-display();
                            .lib-css(justify-content, space-between, 1);

                            > th {
                                .lib-vendor-prefix-flex-grow(1);
                                .lib-vendor-prefix-flex-shrink(1);
                                .lib-vendor-prefix-flex-basis(0);
                                .lib-font-size(16);
                                display: table-cell;

                                &:nth-child(3) {
                                    text-align: right;
                                }

                                &:nth-child(2) {
                                    text-align: center;
                                }

                                &.actions {
                                    display: none;
                                }
                            }
                        }
                    }

                    tbody {
                        > tr {
                            .lib-vendor-prefix-display();
                            .lib-vendor-prefix-flex-wrap();
                            .lib-css(justify-content, space-between, 1);

                            &:last-child {
                                .actions {
                                    border: none;
                                }
                            }

                            td {
                                border: 0;
                                .lib-vendor-prefix-flex-grow(1);
                                .lib-vendor-prefix-flex-shrink(1);
                                .lib-vendor-prefix-flex-basis(0);
                                .lib-font-size(16);
                                display: table-cell;

                                &:first-child {
                                    padding: 7px 14px 7px 0;
                                }

                                &:before {
                                    content: none;
                                }

                                &:nth-child(2) {
                                    text-align: center;
                                }

                                &:nth-child(3) {
                                    text-align: right;
                                }

                                &.actions {
                                    border-bottom: 1px solid @table__border-color;
                                    padding: 0 0 10px 0;
                                    .lib-vendor-prefix-display();
                                    .lib-vendor-prefix-flex-basis(100%);
                                    .lib-css(justify-content, center, 1);

                                    > a {
                                        padding: 10px;
                                        .lib-font-size(18);
                                        &:after {
                                            content: none;
                                        }

                                        &:first-child {
                                            margin-right: 15px;
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }

        &.wishlist-index-index {
            .products-grid {
                .product-item {
                    margin-left: 1.1%;
                    width: 32.1%;

                    &:nth-child(3n + 1) {
                        margin-left: 0;
                    }
                }
            }
        }
    }
}

//
//  Mobile @screen__m
//  _____________________________________________

.media-width(@extremum, @break) when (@extremum = 'max') and (@break = @screen__m) {
    .account {
        .page-main {
            padding-top: 0;
        }

        .page.messages {
            margin: 0 -@layout__width-xs-indent 0;
        }

        .messages {
            margin-bottom: 0;
        }

        .message {
            &.success,
            &.error,
            &.warning {
                margin-bottom: 0;
            }
        }

        .columns .sidebar-main {
            margin-left: -@layout__width-xs-indent;
            margin-right: -@layout__width-xs-indent;
        }

        .block-collapsible-nav {
            position: relative;

            .content {
                position: absolute;
                width: 100%;
            }
        }

        .page-title {
            .lib-font-size(18);
            margin-bottom: 15px;
        }

        .greeting {
            h1 {
                .lib-font-size(20);
            }

            p {
                .lib-font-size(15);
            }
        }

        .container-wrapper {
            .lib-vendor-prefix-flex-wrap();
            .lib-css(justify-content, space-between, 1);

            &.customer-short-info {
                .lib-css(justify-content, flex-start, 1);

                .container {
                    .lib-vendor-prefix-flex-basis(47%);
                    margin-right: 5%;

                    &:nth-child(2n) {
                        margin-top: 0;
                        margin-right: 0;
                    }

                    &:last-child {
                        margin-right: 0;
                    }
                }
            }

            .container {
                border-width: 3px;
                .lib-font-size(12);
                .lib-vendor-prefix-flex-basis(100%);
                .lib-vendor-prefix-flex-shrink(1);
                .lib-vendor-prefix-flex-grow(1);
                padding: 20px 10px 75px 10px;
                max-width: 48%;
                width: 100%;

                &:last-child {
                    margin-top: 20px;
                    max-width: 100%;

                    button {
                        max-width: 390px;
                        width: 90%;
                    }
                }

                h2 {
                    .lib-font-size(14);
                }

                .wrap {
                    max-width: 390px;
                    margin: 0 auto;
                }

                button {
                    padding: 15px 10px;
                    bottom: 15px;

                    span  {
                        .lib-font-size(12);
                    }
                }
            }

            .container-wishlist {
                padding: 20px 15px;

                ol {
                    li {
                        width: 50%;
                    }
                }
            }
        }
        .box-address-billing,
        .box-address-shipping,
        .block-addresses-list .block-content {
            address {
                .lib-font-size(14);
            }
            .box {
                .lib-css(margin-bottom, 0);

                &:last-child {
                    margin-bottom: 0;
                }
            }
        }

        &.customer-address-index {
            .box-address-shipping {
                padding: 15px 0;
            }

            .box-address-billing {
                padding: 0 0 15px 0;
            }

            .column.main {
                .block:not(.widget)  {
                    .box-title span {
                        .lib-font-size(18);
                    }
                }
                .actions-toolbar {
                    button {
                        text-align: left;

                        span {
                            .lib-font-size(15);
                        }
                    }
                }
            }

            div.block-addresses-list {
                margin-bottom: 10px;

                .block-content {
                    li.item {
                        margin-bottom: 5px;
                        padding: 10px 0 10px;

                        .item.actions {
                            .lib-font-size(14);
                        }
                    }
                }
            }

            .block .box-actions {
                .lib-font-size(14);
                margin-top: 15px;
            }
        }

        &.wishlist-index-index {
            .product-items {
                padding: 0 15px;
                .lib-vendor-prefix-display();
                .lib-css(justify-content, space-between, 1);

                &:before,
                &:after {
                    content: none;
                }

                .product-item {
                    margin: 0 0 15px 0;
                    padding: 0;
                    border: 0;
                    width: 48%;

                    &-photo {
                        margin: 0;
                    }

                    &-name {
                        margin: 0;
                        .lib-font-size(12);
                    }

                    .price-box {
                        margin: 0;

                        .price {
                            display: block;
                        }
                    }

                    &-actions {
                        top: 0;
                        right: 8px;

                        .icon-trash {
                            &:before {
                                .lib-font-size(20);
                            }
                        }
                    }
                }
            }
        }

        .table-wrapper {
            position: relative;
            border-bottom: 0;

            &:after {
                position: absolute;
                bottom: 0;
                display: block;
                width: 80%;
                left: 50%;
                .transform(translate(-50%));
                content: '';
                height: 2px;
                background-color: #d5d4d4;
            }
            .table {
                &:not(.totals):not(.cart):not(.table-comparison) {
                    display: table;

                    thead {
                        > tr {
                            .lib-vendor-prefix-display();
                            .lib-css(justify-content, space-between, 1);

                           > th {
                               .lib-vendor-prefix-flex-grow(1);
                               .lib-vendor-prefix-flex-shrink(1);
                               .lib-vendor-prefix-flex-basis(0);
                               .lib-font-size(13);
                                display: table-cell;

                               &:nth-child(3) {
                                   text-align: right;
                               }

                               &:nth-child(2) {
                                   text-align: center;
                               }

                               &.actions {
                                   display: none;
                               }
                            }
                        }
                    }

                    tbody {
                        > tr {
                            .lib-vendor-prefix-display();
                            .lib-vendor-prefix-flex-wrap();
                            .lib-css(justify-content, space-between, 1);

                            &:last-child {
                                td {
                                    border: none;
                                }
                            }

                            td {
                                .lib-vendor-prefix-flex-grow(1);
                                .lib-vendor-prefix-flex-shrink(1);
                                .lib-vendor-prefix-flex-basis(0);
                                .lib-font-size(13);
                                display: table-cell;

                                &:first-child {
                                    padding: 7px 14px 7px 0;
                                }

                                &:before {
                                    content: none;
                                }

                                &:nth-child(2) {
                                    text-align: center;
                                }

                                &:nth-child(3) {
                                    text-align: right;
                                }

                                &.actions {
                                    padding: 5px 0 10px 0;
                                    .lib-vendor-prefix-display();
                                    .lib-vendor-prefix-flex-basis(100%);
                                    .lib-css(justify-content, center, 1);

                                    > a {
                                        padding: 10px;
                                        .lib-font-size(16);
                                        &:after {
                                            content: none;
                                        }

                                        &:first-child {
                                            margin-right: 5px;
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }

    .login-container {
        .fieldset {
            &:after {
                text-align: center;
            }
        }
    }

    .account {
        .page.messages {
            //margin-bottom: @indent__xl;
        }

        .column.main {
            .block:not(.widget) {
                .block-title {
                    &:extend(.abs-add-clearfix-mobile-m all);

                    > .action {
                        float: right;
                        .lib-css(margin-top, @indent__xs);
                    }
                }

                .block-content {
                    .box {
                        .lib-css(margin-bottom, 0);
                        &:last-child {
                            margin-bottom: 0;
                        }
                    }
                }
            }
        }

        &.customer-address-form,
        &.customer-paymentinfo-index {
            .actions-toolbar {
                .lib-vendor-prefix-display();
                .lib-css(justify-content, space-between, 1);

                .secondary,
                .primary {
                    .lib-vendor-prefix-flex-basis(49.4%);
                }

                & > .secondary {
                    .back {
                        width: 100%;
                        padding: @indent__s;

                        span {
                            .lib-font-size(16);
                        }
                    }
                }

                .primary {
                    .save,
                    .action[data-action="save-address"] {
                        width: 100%;
                        padding: @indent__s;
                        border: 1px solid @medium-turquoise;

                        span {
                            .lib-font-size(16);
                        }
                    }
                }
            }
        }
    }

    .control.captcha-image {
        .captcha-img {
            display: block;
            .lib-css(margin-bottom, @indent__s);
        }
    }

    .customer-account-index {
        .page-title-wrapper {
            position: relative;
        }
    }

    .customer-paymentinfo-index {
        .box-address-billing {
            margin-bottom: @layout__width-xs-indent;
            padding-bottom: @layout__width-xs-indent;
            border-bottom-width: 1px;
        }

        .box-content {
            & > .item {
                &.actions {
                    .lib-font-size(14);
                }
            }
        }

        .block-addresses-list {
            .items {
                &.addresses {
                    .item {
                        &.actions {
                            margin-top: 0;
                            line-height: 1;

                            .action {
                                &:after {
                                    height: 12px;
                                    margin: 0 @indent__s;
                                }
                            }
                        }
                    }
                }
            }
        }

        .block-title {
            & > .actions-toolbar {
                margin-top: 0;

                .add-payment {
                    text-align: left;

                    span {
                        .lib-font-size(16);
                        padding-left: @layout__width-xs-indent;
                    }
                }
            }
        }

        .column {
            &.main {
                position: relative;

                &:after {
                    .transform(translate(-50%));
                    position: absolute;
                    display: block;
                    height: 1px;
                    width: 80%;
                    bottom: 30px;
                    left: 50%;
                    content: '';
                    background-color: @form-element-input__border-color;
                }

                h2 {
                    .lib-font-size(20);
                    margin-top: @indent__s;
                }
            }
        }

        .card-type-wrapper {
            min-height: 35px;
            padding-left: 60px;

            &.VI,
            &.MC,
            &.AE,
            &.DI {
                background-size: 47px;
                background-position: 0;
            }

            p {
                .lib-font-size(14);
            }
        }

        .add-payment-form {
            .fieldset {
                &.payment,
                &.telephone-field {
                    width: 100%;
                }

                &.customer-name {
                    & > .field {
                        .lib-vendor-prefix-flex-basis(100%);
                    }
                }

                &.address-information {
                    margin-top: @indent__base;

                    .field {
                        .lib-vendor-prefix-flex-basis(100%);
                    }
                }

                &.telephone-field {
                    margin-bottom: @indent__base;
                }
            }
        }
    }
}

.media-width(@extremum, @break) when (@extremum = 'max') and (@break = @screen__l) {
    .account {
        .page-main {
            padding-top: 0;
        }

        .page.messages {
            margin: 0 -@layout-indent__width 0;
        }

        .messages {
            margin-bottom: 0;
        }

        .message {
            &.success,
            &.error,
            &.warning {
                margin-bottom: 0;
            }
        }

        .columns .sidebar-main {
            margin-left: -@layout-indent__width;
            margin-right: -@layout-indent__width;
            padding-right: 0;
        }

        .block-collapsible-nav {
            position: relative;

            .content {
                position: absolute;
                width: 100%;
            }
        }
    }
}
