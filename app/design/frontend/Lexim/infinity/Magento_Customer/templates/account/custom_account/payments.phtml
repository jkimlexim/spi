<?php
/**
 * Binary Anvil, Inc.
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Binary Anvil, Inc. Software Agreement
 * that is bundled with this package in the file LICENSE_BAS.txt.
 * It is also available through the world-wide-web at this URL:
 * http://www.binaryanvil.com/software/license/
 *
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@binaryanvil.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade this software to
 * newer versions in the future. If you wish to customize this software for
 * your needs please refer to http://www.binaryanvil.com/software for more
 * information.
 *
 * @category    BinaryAnvil
 * @package     Infinity
 * @copyright   Copyright (c) 2018-2019 Binary Anvil,Inc. (http://www.binaryanvil.com)
 * @license     http://www.binaryanvil.com/software/license
 */
?>
<?php
/**
 * @var \ParadoxLabs\TokenBase\Block\Customer\Cards $block
 */

/** @var \ParadoxLabs\TokenBase\Model\Card $creditCard */
$creditCard = $block->getCards()->getFirstItem()->getTypeInstance();
?>
<?php if ($creditCard->getData()): ?>
    <div class="container">
        <div class="wrap">
            <h2><?= __('Payments')?></h2>
            <?php
            /** @var \ParadoxLabs\TokenBase\Helper\Data $ccHelper */
            $ccHelper = $this->helper(\ParadoxLabs\TokenBase\Helper\Data::class)
            ?>
            <p>
                <span class="cart"><?= $ccHelper->translateCardType($creditCard->getAdditional('cc_type')) ?></span>
                <span> | ****-****-<?= $creditCard->getAdditionalObject()->getCcLast4() ?></span>
            </p>
            <button onclick="window.location.href='<?= $block->getUrl('customer/paymentinfo') ?>'">
                <span><?= __('Edit')?></span>
            </button>
        </div>
    </div>
<?php endif; ?>
